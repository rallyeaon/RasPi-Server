# this is a compose.yaml-file to run nginx & letsencrypt stand-alone in a docker/portainer environment if the download is renamed to compose.yaml
#
# However, the lines below the keyword "services" are intended to be copied into an existing /mnt/NVMeData/compose.yaml to add nginx & letsencrypt to the environment# (re)start docker using command 'docker compose up -d'
#
# download this file using command:
# wget https://raw.githubusercontent.com/rallyeaon/RasPi-Server/refs/heads/main/nginx_and_letsencrypt.yaml
#
#
#
services:

##### ----- frontproxy ----- ####################################################
  nginx-proxy:
    image: nginx:latest
    container_name: nginx-proxy
    volumes:
      - /mnt/NVMeData/myopt/nginx:/etc/nginx/conf.d:ro
      - /mnt/NVMeData/myopt/certbot/www/:/var/www/certbot/:ro
      - /mnt/NVMeData/myopt/certbot/conf:/etc/nginx/ssl
    ports:
      - "80:80"
      - "443:443"
    restart: always
#
##### ----- letsencrypt ----- ####################################################
  certbot:
    container_name: letsencrypt
    image: certbot/certbot:latest
    restart: always
    volumes:
      - /mnt/NVMeData/myopt/certbot/www/:/var/www/certbot/:rw
      - /mnt/NVMeData/myopt/certbot/conf/:/etc/letsencrypt/:rw
#
